<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion Learning Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'chatgpt-gray': '#343541',
                        'chatgpt-dark': '#202123',
                        'chatgpt-light': '#40414f',
                    }
                }
            }
        }
    </script>
    <script>
        // Auto-detect resource type based on URL
        document.addEventListener('DOMContentLoaded', function() {
            const urlInput = document.getElementById('url');
            const resourceTypeSelect = document.getElementById('resource_type');
            
            urlInput.addEventListener('input', function() {
                const url = urlInput.value.toLowerCase();
                
                if (url.includes('arxiv')) {
                    resourceTypeSelect.value = 'paper';
                } else if (url.includes('youtube') || url.includes('youtu.be')) {
                    resourceTypeSelect.value = 'youtube';
                } else if (url.trim() !== '') {
                    // Only change to blog if URL is not empty
                    resourceTypeSelect.value = 'blog';
                }
            });
        });
    </script>
    <style>
        body {
            background: linear-gradient(to bottom, #343541 0%, #202123 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .input-focus:focus {
            outline: none;
            border-color: #10a37f;
            box-shadow: 0 0 0 3px rgba(16, 163, 127, 0.1);
        }
        .btn-primary {
            background: linear-gradient(180deg, #10a37f 0%, #0d8f6e 100%);
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(180deg, #0d8f6e 0%, #0b7a5f 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.3);
        }
        .btn-primary:active {
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-semibold text-white mb-2">Notion Learning Assistant</h1>
            <p class="text-gray-400 text-sm">Capture and summarize resources to Notion</p>
        </div>

        <!-- Messages -->
        {% if message %}
        <div class="glass-effect rounded-lg px-4 py-3 mb-6 border border-green-500/30 bg-green-500/10">
            <div class="flex items-center">
                <svg class="w-5 h-5 text-green-400 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
                <p class="text-green-300 text-sm">{{ message }}</p>
            </div>
        </div>
        {% endif %}
        
        {% if error %}
        <div class="glass-effect rounded-lg px-4 py-3 mb-6 border border-red-500/30 bg-red-500/10">
            <div class="flex items-center">
                <svg class="w-5 h-5 text-red-400 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                </svg>
                <p class="text-red-300 text-sm">{{ error }}</p>
            </div>
        </div>
        {% endif %}

        <!-- Main Card -->
        <div class="glass-effect rounded-2xl p-8 shadow-2xl">
            <form action="/submit" method="post" class="space-y-6">
                
                <!-- URL Input -->
                <div>
                    <label for="url" class="block text-sm font-medium text-gray-300 mb-2">
                        Resource URL
                    </label>
                    <input 
                        type="url" 
                        name="url" 
                        id="url" 
                        required 
                        placeholder="https://arxiv.org/abs/2301.12345 or https://youtube.com/watch?v=..."
                        class="input-focus w-full px-4 py-3 bg-[#40414f] border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:bg-[#4a4b5a] transition-colors"
                    >
                </div>

                <!-- Resource Type -->
                <div>
                    <label for="resource_type" class="block text-sm font-medium text-gray-300 mb-2">
                        Resource Type
                    </label>
                    <select 
                        name="resource_type" 
                        id="resource_type" 
                        required
                        class="input-focus w-full px-4 py-3 bg-[#40414f] border border-gray-600 rounded-lg text-white focus:bg-[#4a4b5a] transition-colors"
                    >
                        <option value="youtube" class="bg-[#40414f]">YouTube Video</option>
                        <option value="blog" selected class="bg-[#40414f]">Blog/Article</option>
                        <option value="paper" class="bg-[#40414f]">Paper (arXiv)</option>
                        <option value="survey_paper" class="bg-[#40414f]">Survey Paper (arXiv)</option>
                    </select>
                </div>

                <!-- Reminder -->
                <div>
                    <label for="reminder" class="block text-sm font-medium text-gray-300 mb-2">
                        When to Review?
                    </label>
                    <select 
                        name="reminder" 
                        id="reminder" 
                        class="input-focus w-full px-4 py-3 bg-[#40414f] border border-gray-600 rounded-lg text-white focus:bg-[#4a4b5a] transition-colors"
                    >
                        <option value="none" class="bg-[#40414f]">No Reminder</option>
                        <option value="tomorrow" class="bg-[#40414f]">Tomorrow (1 Day)</option>
                        <option value="3days" selected class="bg-[#40414f]">In 3 Days</option>
                        <option value="1week" class="bg-[#40414f]">In 1 Week</option>
                    </select>
                </div>

                <!-- Submit Button -->
                <button 
                    type="submit" 
                    class="btn-primary w-full py-3.5 px-6 rounded-lg text-white font-medium text-base shadow-lg"
                >
                    <span class="flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        Process & Save to Notion
                    </span>
                </button>
            </form>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-gray-500 text-xs">
            <p>Powered by Ollama & Notion</p>
        </div>
    </div>

</body>
</html>
